#!/usr/bin/env python2.6
from __future__ import with_statement
import os; activate_this=os.path.join(os.path.dirname(__file__), 'activate_this.py'); execfile(activate_this, dict(__file__=activate_this)); del os, activate_this

import sys

import libcchdo as L
import libcchdo.model.datafile
import libcchdo.formats.ctd.zip.exchange as ctdzipex
import libcchdo.formats.ctd.zip.netcdf as ctdzipnc


def main(argv):
    if len(argv) < 2:
        print 'Usage:', argv[0], '<ctd exchange zip>'
        return 1
    
    file = L.model.datafile.DataFileCollection()
    with open(argv[1], 'r') as in_file:
        ctdzipex.read(file, in_file)
    
    ctdzipnc.write(file, sys.stdout)


if __name__ == '__main__':
    sys.exit(main(sys.argv))
